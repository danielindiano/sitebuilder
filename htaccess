RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [L]

Header add Vary "X-Visitor-Token"

#CORS headers
SetEnvIfNoCase request_uri \.(?:jpg|jpeg|gif|png) ALLOW_CORS
Header always add Access-Control-Allow-Origin "*" env=ALLOW_CORS
Header add Access-Control-Allow-Headers "if-none-match"

# compress all text files
AddOutputFilterByType DEFLATE application/atom+xml \
                        application/javascript \
                        application/json \
                        application/rss+xml \
                        application/vnd.ms-fontobject \
                        application/x-font-ttf \
                        application/xhtml+xml \
                        application/xml \
                        font/opentype \
                        image/svg+xml \
                        image/x-icon \
                        text/css \
                        text/html \
                        text/plain \
                        text/x-component \
                        text/xml
<IfModule mod_expires.c>
  # Turn on Expires
  ExpiresActive On

  <FilesMatch "\.(?i:jpg|jpeg|png|gif|svg)$">
    ExpiresDefault "access plus 3 days"
    # 3 days
    # Expires Default A259200
    # Header append Cache-Control "private must-revalidate"
  </FilesMatch>

  ExpiresByType application/json          "access plus 30 minutes"
</IfModule>
